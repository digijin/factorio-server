language: node_js
node_js:
- '8'
services:
- docker
jobs:
  include:
    - stage: build
      script:
      - wget https://www.factorio.com/get-download/stable/headless/linux64
      - mv linux64 files/factorio_headless_x64_0.16.51.tar.xz
      - docker build -t digijin/factorio-server .
      - docker push digijin/factorio-server
      - zip -r fac-v${TRAVIS_BUILD_NUMBER}.zip Dockerrun.aws.json .ebextensions